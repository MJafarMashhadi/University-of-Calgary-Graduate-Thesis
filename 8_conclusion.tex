\chapter{Conclusion} \label{sec:summary} %  and Future Work?
I first experimented with white-box model inference of MicroPilot's source code using existing state of the art tools. 
However, the algorithms' implementations showed quite a number of scalability issues when tested with such a large scale software system. I was able to mitigate or even solve some of the issues through various methods and tricks, but still they were not usable as a robust model inference technique. These attempts were published in ICPC '19 (co-located with ICSE) in negative results track. \footnote{I referenced that paper \cite{mashhadi2019empirical} in this thesis but did not include it.}

Thereafter, considering the partner company's needs, I took a higher level black-box approach in modeling the software. Inspired by deep neural network architectures that showed good performance other fields (such as speech recognition, sleep phase detection, and human activity recognition) I came up with a deep neural network that combined convolutions and recurrent cells. Training this model using an appropriate loss function yielded promising results in inferring a behavioural model from the auto-pilot execution data.

The results could be made stronger if they could be replicated on another similar software as well. Therefore I started working on applying the same method on an open source auto-pilot software. Considering several aspects, I chose Paparazzi UAV auto-pilot as the subject for the replication study. I created a tool that automatically generated fuzz test scenarios for fixed wing aircraft that use Paparazzi. It could also execute the tests and collect telemetry data for training the model down the way. 
I managed to replicate the study and get results as good as (in some cases even better) the first study on MicroPilot. In addition, I created a hyper-parameter tuning pipeline that significantly improved the results on Paparazzi's data; the default hyper-parameter values were [manually] tuned for MicroPilot.

To sum up: I developed a novel method for inferring black box models for auto-pilot software systems, evaluated it on a large company's source code as well as a widely used open source solution. Along the way, I published two conference paper and one journal paper (which was also presented in ASE '19's journal-first-conference-second track), salvaged a Java instrumentation tool (\url{https://github.com/sea-lab/JInstrumenter}) that is used for white-box analysis, and developed a fuzz test generator/executor/flight data recorder tool specialized for Paparazzi (\url{https://github.com/MJafarMashhadi/pprz_tester}). Also, I contributed ~10 pull requests to Paparazzi fixing bugs, adding features, etc which are included in its latest version during developing that tool.


\chapter{Future Work}\label{sec:future_work}
In this thesis, I introduced a hybrid CNN-RNN model that can be used for both CPD and state classification problems in multivariate time series. The proposed approach can be used as a black-box state model inference for variety of use cases such as testing, debugging, and anomaly detection in control software systems, where there are several input signals that control output states. I have evaluated this approach on a case study of a UAV auto-pilot software from our industry partner with 888 test cases and showed significant improvement in both change point detection and state classification. In the future, I plan to examine the use of transfer learning to reduce the labeling overhead. Another way of continuing this work is to use these models to perform a downstream task such as test generation or validation. Adapting this method to more varied input types such as images in video surveilance systems or self-driving cars could be another interesting line of work for continuing this work.
